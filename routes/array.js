/**
 * Created by luuk on 1/10/17.
 */

var json = {
    "alpino_ds": {
        "version": "1.5",
        "node": {
            "begin": "0",
            "cat": "top",
            "end": "8",
            "id": "0",
            "rel": "top",
            "$t": "",
            "node": {
                "begin": "0",
                "cat": "whq",
                "end": "8",
                "id": "1",
                "rel": "--",
                "$t": "",
                "node": [
                    {
                        "begin": "0",
                        "cat": "np",
                        "end": "2",
                        "id": "2",
                        "index": "1",
                        "rel": "whd",
                        "$t": "",
                        "node": [
                            {
                                "begin": "0",
                                "buiging": "met-e",
                                "end": "1",
                                "frame": "determiner(welke,rwh,nmod,pro,yparg)",
                                "id": "3",
                                "infl": "welke",
                                "lcat": "detp",
                                "lemma": "welk",
                                "naamval": "stan",
                                "npagr": "rest",
                                "pdtype": "det",
                                "pos": "det",
                                "positie": "prenom",
                                "postag": "VNW(vb,det,stan,prenom,met-e,rest)",
                                "pt": "vnw",
                                "rel": "det",
                                "root": "welk",
                                "sense": "welk",
                                "vwtype": "vb",
                                "wh": "rwh",
                                "word": "Welke"
                            },
                            {
                                "begin": "1",
                                "end": "2",
                                "frame": "noun(het,count,pl)",
                                "gen": "het",
                                "getal": "mv",
                                "graad": "basis",
                                "id": "4",
                                "lcat": "np",
                                "lemma": "product",
                                "ntype": "soort",
                                "num": "pl",
                                "pos": "noun",
                                "postag": "N(soort,mv,basis)",
                                "pt": "n",
                                "rel": "hd",
                                "rnum": "pl",
                                "root": "product",
                                "sense": "product",
                                "word": "producten"
                            }
                        ]
                    },
                    {
                        "begin": "0",
                        "cat": "sv1",
                        "end": "8",
                        "id": "5",
                        "rel": "body",
                        "$t": "",
                        "node": [
                            {
                                "begin": "0",
                                "end": "2",
                                "id": "6",
                                "index": "1",
                                "rel": "obj1"
                            },
                            {
                                "begin": "2",
                                "end": "3",
                                "frame": "verb(hebben,sg1,transitive_ndev)",
                                "id": "7",
                                "infl": "sg1",
                                "lcat": "sv1",
                                "lemma": "hebben",
                                "pos": "verb",
                                "postag": "WW(pv,tgw,ev)",
                                "pt": "ww",
                                "pvagr": "ev",
                                "pvtijd": "tgw",
                                "rel": "hd",
                                "root": "heb",
                                "sc": "transitive_ndev",
                                "sense": "heb",
                                "stype": "whquestion",
                                "tense": "present",
                                "word": "heb",
                                "wvorm": "pv"
                            },
                            {
                                "begin": "3",
                                "case": "nom",
                                "def": "def",
                                "end": "4",
                                "frame": "pronoun(nwh,fir,sg,de,nom,def)",
                                "gen": "de",
                                "getal": "ev",
                                "id": "8",
                                "lcat": "np",
                                "lemma": "ik",
                                "naamval": "nomin",
                                "num": "sg",
                                "pdtype": "pron",
                                "per": "fir",
                                "persoon": "1",
                                "pos": "pron",
                                "postag": "VNW(pers,pron,nomin,vol,1,ev)",
                                "pt": "vnw",
                                "rel": "su",
                                "rnum": "sg",
                                "root": "ik",
                                "sense": "ik",
                                "status": "vol",
                                "vwtype": "pers",
                                "wh": "nwh",
                                "word": "ik"
                            },
                            {
                                "begin": "4",
                                "cat": "pp",
                                "end": "6",
                                "id": "9",
                                "rel": "mod",
                                "$t": "",
                                "node": [
                                    {
                                        "begin": "4",
                                        "end": "5",
                                        "frame": "preposition(op,[af,na])",
                                        "id": "10",
                                        "lcat": "pp",
                                        "lemma": "op",
                                        "pos": "prep",
                                        "postag": "VZ(init)",
                                        "pt": "vz",
                                        "rel": "hd",
                                        "root": "op",
                                        "sense": "op",
                                        "vztype": "init",
                                        "word": "op"
                                    },
                                    {
                                        "begin": "5",
                                        "end": "6",
                                        "frame": "noun(de,count,sg)",
                                        "gen": "de",
                                        "genus": "zijd",
                                        "getal": "ev",
                                        "graad": "basis",
                                        "id": "11",
                                        "lcat": "np",
                                        "lemma": "voorraad",
                                        "naamval": "stan",
                                        "ntype": "soort",
                                        "num": "sg",
                                        "pos": "noun",
                                        "postag": "N(soort,ev,basis,zijd,stan)",
                                        "pt": "n",
                                        "rel": "obj1",
                                        "rnum": "sg",
                                        "root": "voorraad",
                                        "sense": "voorraad",
                                        "word": "voorraad"
                                    }
                                ]
                            },
                            {
                                "begin": "6",
                                "cat": "pp",
                                "end": "8",
                                "id": "12",
                                "rel": "mod",
                                "$t": "",
                                "node": [
                                    {
                                        "begin": "6",
                                        "end": "7",
                                        "frame": "preposition(in,[])",
                                        "id": "13",
                                        "lcat": "pp",
                                        "lemma": "in",
                                        "pos": "prep",
                                        "postag": "VZ(init)",
                                        "pt": "vz",
                                        "rel": "hd",
                                        "root": "in",
                                        "sense": "in",
                                        "vztype": "init",
                                        "word": "in"
                                    },
                                    {
                                        "begin": "7",
                                        "end": "8",
                                        "frame": "tmp_noun(de,count,sg)",
                                        "gen": "de",
                                        "genus": "zijd",
                                        "getal": "ev",
                                        "graad": "basis",
                                        "id": "14",
                                        "lcat": "np",
                                        "lemma": "januari",
                                        "naamval": "stan",
                                        "ntype": "eigen",
                                        "num": "sg",
                                        "pos": "noun",
                                        "postag": "N(eigen,ev,basis,zijd,stan)",
                                        "pt": "n",
                                        "rel": "obj1",
                                        "rnum": "sg",
                                        "root": "januari",
                                        "sense": "januari",
                                        "special": "tmp",
                                        "word": "januari"
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        },
        "sentence": {
            "sentid": "127.0.0.1",
            "$t": "Welke producten heb ik op voorraad in januari"
        }
    }
};

console.log(makeArray(json.alpino_ds, json.alpino_ds.node.end, []));


function makeArray(json, nWords, resArr){
    if(json.node == undefined){
        if(json.word != undefined){
            var obj = {word: json.word, pt: json.pt, pos: json.pos};
            resArr.push(obj);
        }
        if(resArr.length == nWords){
            return resArr;
        }
    }else{
        if(json.node[0] != undefined){
            return loopNodeArr(json.node, nWords, resArr);
        }else{
            return makeArray(json.node, nWords, resArr);
        }
    }
}

function loopNodeArr(json, nWords, resArr){
    for(var i in json){
        makeArray(json[i], nWords, resArr);
    }
    if(resArr.length == nWords){
        return resArr;
    }
}
